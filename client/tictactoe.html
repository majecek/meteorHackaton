<head>
    <title>tictactoe</title>
</head>

<body>

<div class="navbar">
    <div class="navbar-inner">
        <a class="brand" href="#">Tic-Tac-Toe</a>
        <ul class="nav">
            <li class="active"><a href="#">{{loginButtons align="left"}}</a></li>
            <li>{{> newGame}}</li>
        </ul>
    </div>
</div>


<div class="row-fluid">
    {{#if currentUser}}
    <div class="span6">
        {{> bootstrapCanvas}}
    </div>
    <div class="span6">
        {{> availableGames}}
    </div>
    {{/if}}
</div>

</body>



<template name="newGame">
    <input type="button" value="Create game" class="btn btn-info create-game">
</template>


<template name="availableGames">

    <table class="table-bordered table-condensed table-striped">
        <caption>Winners Table</caption>
        <thead>
            <tr>
                <td class="span3 well well-small">Player Email</td>
                <td class="span3 well well-small">Count of wins</td>
            </tr>
        </thead>
        <tbody>
            {{#each winners}}
            <tr>
                <td>{{email}}</td>
                <td>{{count}}</td>
            </tr>
            {{/each}}
        </tbody>
    </table>
    <p></p>
    <p></p>

    <table class="table table-condensed" >
        {{#each games}}
            {{#if selectedRow}}
                <tr class="success">
            {{else}}
                <tr>
            {{/if}}
                <td class="span1"><h4>{{status}}</h4></td>
                <td class="span2"><h6>{{emails}}</h6></td>
                <td class="span1">

                    {{#if canJoin}}
                        {{#if  moreGames}}
                            <input type="button" value="Join game" class="btn btn-success join-game" id="{{_id}}">
                        {{/if}}
                    {{else}}
                        {{#if  moreGames}}
                            <input type="button" value="Switch to game" class="btn btn-warning view-game" id="{{_id}}">
                        {{/if}}
                    {{/if}}
                </td>
                <td class="span1">
                    {{#if isWinner}}
                        <h4>Winner:</h4> {{winner.email}}
                    {{/if}}
                </td>
            </tr>
        {{/each}}
    </table>

</template>


<template name="bootstrapCanvas">

    {{#if game.game.nextPlayer}}
        <p><h5>Next Player:</h5> <div class="text-info">{{game.game.nextPlayer}}</div></p>
    {{/if}}

    <table class="tictactoe">
        {{#each game.board}}
        <tr>
            {{#each cells}}
            <td class="cell {{symbol}}">
                {{> cell}}
            </td>
            {{/each}}
        </tr>
        {{/each}}
    </table>

</template>

<template name="cell">

    <!--{{position.x}}-{{position.y}}-->
    &nbsp;
</template>
